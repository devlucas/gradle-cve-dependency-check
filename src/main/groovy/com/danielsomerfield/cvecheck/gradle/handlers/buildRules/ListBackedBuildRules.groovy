package com.danielsomerfield.cvecheck.gradle.handlers.buildRules

class ListBackedBuildRules implements BuildRules {
  private List<BuildRule> addedRules = []
  private List<BuildRule> defaultRules = []

  ListBackedBuildRules(List<BuildRule> defaultRules = []) {
    this.defaultRules = defaultRules;
  }

  @Override
  void addBuildRule(final BuildRule rule) {
    addedRules.add(rule)
  }

  @Override
  public void each(Closure closure) {
    getRules().each closure
  }

  @Override
  public <T> Collection<T> map(final Closure<T> closure) {
    getRules().collect(closure)
  }

  @Override
  int size() {
    getRules().size()
  }

  BuildRule get(int index) {
    return getRules().get(index)
  }

  private List<BuildRule> getRules() {
    addedRules.empty ? defaultRules : addedRules
  }
}
