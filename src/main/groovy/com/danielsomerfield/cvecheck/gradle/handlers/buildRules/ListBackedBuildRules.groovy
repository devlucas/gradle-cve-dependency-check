package com.danielsomerfield.cvecheck.gradle.handlers.buildRules

class ListBackedBuildRules implements BuildRules {
  private List<BuildRule> addedRules = []
  private List<BuildRule> defaultRules = []

  ListBackedBuildRules(List<BuildRule> defaultRules = []) {
    this.defaultRules = defaultRules;
  }

  @Override
  void addBuildRule(final BuildRule rule) {
    addedRules.add(rule)
  }

  @Override
  public void each(Closure<BuildRule> closure) {
    getRules().each closure
  }

  @Override
  int size() {
    getRules().size()
  }

  def List<BuildRule> getRules() {
    addedRules.empty ? defaultRules : addedRules
  }
}
