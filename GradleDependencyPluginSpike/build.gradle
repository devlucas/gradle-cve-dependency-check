apply plugin: 'groovy'


sourceCompatibility = 1.7
version = '1.0'

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.springframework:spring-core:2.5.5'
    testCompile "junit:junit:4.+"
}

apply plugin: DependencyPlugin

class DependencyPlugin implements Plugin<Project> {
    void apply (Project project) {
        project.task('show-deps') << {
//            project.configurations.testCompile.resolvedConfiguration.resolvedArtifacts.each {
//                artifact ->
//                    println(artifact.getFile())
//            }
            project.getConfigurations().findAll {Configuration configuration ->
                configuration.getResolvedConfiguration().getResolvedArtifacts().each { ResolvedArtifact artifact ->
                    println(artifact.getFile())
                }
            }
        }
        //project.configurations.compile*.toURI().find { URI uri -> println(uri)}
//        project.task('show-deps') << {
//            println("***********")
//            project.getConfigurations().findAll {Configuration configuration ->
//                configuration.getAllDependencies().findAll { dependency ->
//                    println(dependency)
//                }
//            }
//            println("***********")
//        }
    }
}

