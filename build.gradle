apply plugin: 'groovy'
apply plugin: 'maven'

sourceCompatibility = 1.7
version = generateVersion()
group = 'com.danielsomerfield.dependencycheck'


repositories {
    mavenLocal()
    mavenCentral()
}

dependencies {
    compile localGroovy()
    compile gradleApi()
    compile 'org.owasp:dependency-check-core:1.2.+'
    testCompile "junit:junit:4.+"
}

test {
    exclude '**/*E2ETest.*'
}

task e2etest(type: Test, dependsOn: ['install']) {
    include '**/*E2ETest.*'
}

def static generateVersion() {
    def versionNumber = '0.1.0'
    def buildName = System.getenv("CI") == 'true' ? System.getenv("SNAP_PIPELINE_COUNTER") : "DEV"
    "$versionNumber-$buildName"
}
